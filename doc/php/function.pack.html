<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Упаковывает данные в бинарную строку</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.ignore-user-abort.html">ignore_user_abort</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.php-check-syntax.html">php_check_syntax</a></div>
 <div class="up"><a href="ref.misc.html">Разные Функции</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.pack" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">pack</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">pack</span> &mdash; <span class="dc-title">Упаковывает данные в бинарную строку</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.pack-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>pack</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$format</tt></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$args</tt></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$...</tt></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Упаковывает заданные аргументы в бинарную строку согласно формату в параметре
   <i><tt class="parameter">format</tt></i>. 
  </p>
  <p class="para">
   Идея этой функции была заимствована из Perl и все коды форматирования
   работают также. Однако, есть некоторые отсутствующие коды форматирования,
   как, к примеру, код формата Perl &quot;u&quot;.
  </p>
  <p class="para">
   Необходимо иметь ввиду, что отличие между знаковыми и беззнаковыми
   значениями влияет только на <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span> функцию, тогда как
   функция <span class="function"><b>pack()</b></span> дает одинаковый результат для знаковых и
   беззнаковых кодов формата.
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.pack-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">format</tt></i></span>
     <dd>

      <p class="para">
       Параметр <i><tt class="parameter">format</tt></i> задается в виде строки и состоит
       из кодов формата и опционального аргумента повторения. Аргумент может быть
       целочисленным, либо <i>*</i> для повторения до конца введенных
       данных. Для a, A, h, H число повторений определяет то, сколько символов
       взято от одного аргумента данных, для @ - это абсолютная позиция для размещения
       следующих данных, для всего остального число повторений определяет как много
       аргументов данных было обработано и упаковано в результирующую бинарную строку.
      </p>
      <p class="para">
       Работающие на данный момент форматы:
       <table class="doctable table">
        <caption><b>Символы форматов функции <span class="function"><b>pack()</b></span></b></caption>
        
         <thead valign="middle">
          <tr valign="middle">
           <th>Код</th>
           <th>Описание</th>
          </tr>

         </thead>

         <tbody valign="middle" class="tbody">
          <tr valign="middle">
           <td align="left">a</td>
           <td align="left">Строка (string) с NUL-заполнением</td>
          </tr>

          <tr valign="middle">
           <td align="left">A</td>
           <td align="left">Строка (string) со SPACE-заполнением</td></tr>

          <tr valign="middle">
           <td align="left">h</td>
           <td align="left">Hex-строка (Hex string), с нижнего разряда</td></tr>

          <tr valign="middle">
           <td align="left">H</td>
           <td align="left">Hex-строка (Hex string), с верхнего разряда</td></tr>

          <tr valign="middle">
           <td align="left">c</td>
           <td align="left">знаковый символ (char)</td>
          </tr>

          <tr valign="middle">
           <td align="left">C</td>
           <td align="left">беззнаковый символ (char)</td>
          </tr>

          <tr valign="middle">
           <td align="left">s</td>
           <td align="left">знаковый short (всегда 16 бит, машинный байтовый порядок)</td>
          </tr>

          <tr valign="middle">
           <td align="left">S</td>
           <td align="left">беззнаковый short (всегда 16 бит, машинный байтовый порядок)</td>
          </tr>

          <tr valign="middle">
           <td align="left">n</td>
           <td align="left">беззнаковый short (всегда 16 бит, порядок big endian)</td>
          </tr>

          <tr valign="middle">
           <td align="left">v</td>
           <td align="left">беззнаковый short (всегда 16 бит, порядок little endian)</td>
          </tr>

          <tr valign="middle">
           <td align="left">i</td>
           <td align="left">знаковый integer (машинно-зависимый размер и порядок)</td>
          </tr>

          <tr valign="middle">
           <td align="left">I</td>
           <td align="left">беззнаковый integer (машинно-зависимый размер и порядок)</td>
          </tr>

          <tr valign="middle">
           <td align="left">l</td>
           <td align="left">знаковый long (всегда 32 бит, машинный порядок)</td>
          </tr>

          <tr valign="middle">
           <td align="left">L</td>
           <td align="left">беззнаковый long (всегда 32 бит, машинный порядок)</td>
          </tr>

          <tr valign="middle">
           <td align="left">N</td>
           <td align="left">беззнаковый long (всегда 32 бит, порядок big endian)</td>
          </tr>

          <tr valign="middle">
           <td align="left">V</td>
           <td align="left">беззнаковый long (всегда 32 бит, порядок little endian)</td>
          </tr>

          <tr valign="middle">
           <td align="left">f</td>
           <td align="left">float (машинно-зависимые размер и прдставление)</td>
          </tr>

          <tr valign="middle">
           <td align="left">d</td>
           <td align="left">double (машинно-зависимые размер и прдставление)</td>
          </tr>

          <tr valign="middle">
           <td align="left">x</td>
           <td align="left">NUL байт</td>
          </tr>

          <tr valign="middle">
           <td align="left">X</td>
           <td align="left">Резервирование одного байта</td>
          </tr>

          <tr valign="middle">
           <td align="left">@</td>
           <td align="left">NUL-заполнение до абсолютной позиции</td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">args</tt></i></span>
     <dd>

      <p class="para">
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.pack-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает бинарную строку, содержащую данные.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.pack-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-3382">
    <p><b>Пример #1 Пример использования <span class="function"><b>pack()</b></span></b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$binarydata&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pack</span><span style="color: #007700">(</span><span style="color: #DD0000">"nvc*"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0x1234</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0x5678</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">65</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">66</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Полученная бинарная строка длиной 6 байт будет содержать
последовательность байтов 0x12, 0x34, 0x78, 0x56, 0x41, 0x42.
    </p></div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.pack-notes">
  <h3 class="title">Примечания</h3>
  <div class="caution"><b class="caution">Предостережение</b>
   <p class="para">
    Необходимо отметить, что PHP сохраняет значения типа <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> как
знаковые с машинно-зависимым размером (C тип <i>long</i>).   
    Все числа, переданные как <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>, но выходящие за границы этого типа будут сохранены с типом <span class="type"><a href="language.types.float.html" class="type float">float</a></span>.
    При упакове этих <span class="type"><a href="language.types.float.html" class="type float">float</a></span> как <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>, они будут переданы с типом <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>. Это может как совпадать, так и нет с заданным шаблоном.
   </p>
   <p class="para">
    Наиболее частым является случай, когда упаковываются беззнаковые числа типа <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>. В системах, где <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> имеет размер в 32 бита, число обычно передается по тому же шаблону, как если бы <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> был беззнаковым (хотя, это зависит от определенных преобразований из знаковое в беззнаковое, согласно стандарту С). В системах, где тип <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> имеет размер в 64 бита, тип <span class="type"><a href="language.types.float.html" class="type float">float</a></span> не имеет мантиссы, достаточной по размеру для хранения значения без потери точности. Если эти системы также имеют простой 64-битный С тип <i>int</i> (большинство UNIX систем не имеют), то единственным путем для использования формата <i>I</i> в верхнем разряде является создание отрицательных <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> значений с тем же представлением как и в определенном беззнаковом значении.
   </p>
  </div>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.pack-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.unpack.html" class="function" rel="rdfs-seeAlso">unpack()</a> - Распаковывает данные из бинарной строки</span></li>
   </ul>
  </p>
 </div>

 
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.ignore-user-abort.html">ignore_user_abort</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.php-check-syntax.html">php_check_syntax</a></div>
 <div class="up"><a href="ref.misc.html">Разные Функции</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
