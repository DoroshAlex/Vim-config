<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Одноуровневый поиск</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.ldap-get-values.html">ldap_get_values</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.ldap-mod-add.html">ldap_mod_add</a></div>
 <div class="up"><a href="ref.ldap.html">LDAP</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.ldap-list" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ldap_list</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">ldap_list</span> &mdash; <span class="dc-title">Одноуровневый поиск</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.ldap-list-description">
  <h3 class="title">Описание</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname"><b>ldap_list</b></span>
    ( <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$link_identifier</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$base_dn</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filter</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$attributes</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$attrsonly</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$sizelimit</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$timelimit</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$deref</tt></span>
  ]]]]] )</div>

  <p class="para rdfs-comment">
   Выполняет поиск для указанного <i><tt class="parameter">filter</tt></i> в
   директории в рамках <b><tt>LDAP_SCOPE_ONELEVEL</tt></b>.
  </p>
  <p class="para">
   <b><tt>LDAP_SCOPE_ONELEVEL</tt></b> означает, что поиск должен 
   возвратить только информацию, которая является следующим уровнем ниже
   <i><tt class="parameter">base_dn</tt></i>, заданного при вызове. 
   (Эквивалент вводу &quot;<strong class="command">ls</strong>&quot; и получения списка файлов и папок
   в текущем рабочем каталоге.)
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.ldap-list-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">link_identifier</tt></i></span>
     <dd>

      <p class="para">
       Идентификатор ссылки LDAP, возвращенный <span class="function"><a href="function.ldap-connect.html" class="function">ldap_connect()</a></span>.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">base_dn</tt></i></span>
     <dd>

      <p class="para">
       Базовое DN для каталога.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">filter</tt></i></span>
     <dd>

      <p class="para">
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">attributes</tt></i></span>
     <dd>

      <p class="para">
       Массив необходимых атрибутов, например, <i>array(&quot;mail&quot;, &quot;sn&quot;, &quot;cn&quot;)</i>.
       Обратите внимание, что &quot;dn&quot; возвращается всегда, независимо от того, какие
       типы атрибутов требуются.       
      </p>
      <p class="para">
       Использование этого параметра намного более эффективно чем действие по умолчанию 
       (которое должно возвратить все атрибуты и их присвоенные значения).
       Поэтому использование этого параметра нужно считать хорошей практикой.       
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">attrsonly</tt></i></span>
     <dd>

      <p class="para">
       Должен быть равен 1, только если требуются типы атрибута. Если установлено
       0, то, по умолчанию, выбираются и типы атрибутов и значения атрибута.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">sizelimit</tt></i></span>
     <dd>

      <p class="para">
       Позволяет ограничить количество выбранных записей. Установка этого параметра
       как 0 означает, что ограничение отсутствует.
      </p>
      <blockquote class="note"><p><b class="note">Замечание</b>: 
       <p class="para">
        Этот параметр НЕ может переопределять предустановку sizelimit на стороне сервера.
        Хотя его можно установить ниже.
       </p>
       <p class="para">
        Некоторые хосты серверов каталогов будут сконфигурированы так, чтобы 
        возвратить не больше, чем предварительно установленное число записей. Если
        это произойдет, то сервер укажет, что возвратил только частичный набор
        результатов. Это также происходит, если Вы используете этот параметр, чтобы
        ограничить количество выбранных записей.        
       </p>
      </p></blockquote>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">timelimit</tt></i></span>
     <dd>

      <p class="para">
       Устанавливает число секунд, ограничивающее процесс поиска.
       Установка этого параметра как 0 означает, что ограничение отсутствует.      
      </p>
      <blockquote class="note"><p><b class="note">Замечание</b>: 
       <p class="para">
        Этот параметр НЕ может переопределять предустановку timelimit на стороне сервера.
        Хотя его можно установить ниже.
       </p>
      </p></blockquote>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">deref</tt></i></span>
     <dd>

      <p class="para">
       Определяет, как псевдонимы должны быть обработаны во время поиска. Может
       быть одним из следующих:
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <b><tt>LDAP_DEREF_NEVER</tt></b> - (по умолчанию) псевдонимы никогда не разыменовываться.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>LDAP_DEREF_SEARCHING</tt></b> - псевдонимы должны быть разыменованы во время поиска, 
          но не при определении местоположения базового объекта поиска.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>LDAP_DEREF_FINDING</tt></b> - псевдонимы должны быть разыменованы при определении
          местоположения базового объекта, но не во время поиска.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>LDAP_DEREF_ALWAYS</tt></b> - псевдонимы должны всегда разыменовываться всегда.
         </span>
        </li>
       </ul>
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.ldap-list-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает идентификатор результата поиска или <b><tt>FALSE</tt></b> в случае ошибки.
  </p>
 </div>

 
 <div class="refsect1 changelog" id="refsect1-function.ldap-list-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.0.5</td>
       <td align="left">
        Была добавлена поддержка параллельного поиска.
        Для более подробной информации см. <span class="function"><a href="function.ldap-search.html" class="function">ldap_search()</a></span>.
       </td>
      </tr>

      <tr valign="middle">
       <td align="left">4.0.2</td>
       <td align="left">
        Были добавлены <i><tt class="parameter">attrsonly</tt></i>, <i><tt class="parameter">sizelimit</tt></i>,
        <i><tt class="parameter">timelimit</tt></i> и <i><tt class="parameter">deref</tt></i>.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.ldap-list-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   <div class="example" id="example-3925">
    <p><b>Пример #1 Выводит список всех организационных единиц организации</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;$ds&nbsp;верный&nbsp;идентификатор&nbsp;ссылки&nbsp;на&nbsp;сервер&nbsp;директории<br /><br /></span><span style="color: #0000BB">$basedn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"o=My&nbsp;Company,&nbsp;c=US"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$justthese&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"ou"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$sr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ldap_list</span><span style="color: #007700">(</span><span style="color: #0000BB">$ds</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$basedn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ou=*"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$justthese</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$info&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ldap_get_entries</span><span style="color: #007700">(</span><span style="color: #0000BB">$ds</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sr</span><span style="color: #007700">);<br /><br />for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">[</span><span style="color: #DD0000">"count"</span><span style="color: #007700">];&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$info</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #DD0000">"ou"</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.ldap-list-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ldap-search.html" class="function" rel="rdfs-seeAlso">ldap_search()</a> - Поиск по LDAP дереву</span></li>
   </ul>
  </p>
 </div>

 
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.ldap-get-values.html">ldap_get_values</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.ldap-mod-add.html">ldap_mod_add</a></div>
 <div class="up"><a href="ref.ldap.html">LDAP</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
