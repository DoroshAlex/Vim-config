<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Модификаторы шаблонов</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="regexp.reference.performance.html">Производительность</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="reference.pcre.pattern.differences.html">Differences From Perl</a></div>
 <div class="up"><a href="pcre.pattern.html">Регулярные выражения PCRE</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="reference.pcre.pattern.modifiers" class="article">
 <h1>Модификаторы шаблонов</h1>

 
  <p class="para">
   Ниже перечислены все доступные на сегодняшний день модификаторы.
   Имя, взятое в круглые скобки, указывает внутреннее PCRE имя для данного модификатора.
   Пробелы и переводы строк в модификаторах игнорируются, другие символы
   вызывают ошибки.
  </p>
  <p class="para">
   <blockquote class="blockquote">
    <dl>

     <dt>

      <span class="term"><em class="emphasis">i</em> (<i>PCRE_CASELESS</i>)</span>
      <dd>

       <span class="simpara">
        Если этот модификатор используется, символы в шаблоне
        соответствуют символам как верхнего, так и нижнего регистра.
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">m</em> (<i>PCRE_MULTILINE</i>)</span>
      <dd>

       <span class="simpara">
        По умолчанию PCRE обрабатывает данные как однострочную символьную строку
        (даже если она содержит несколько разделителей строк).
        Метасимвол начала строки &#039;^&#039; соответствует только началу
        обрабатываемого текста, в то время как метасимвол &quot;конец строки&quot;
        &#039;$&#039; соответствует концу текста, либо позиции перед
        завершающим текст переводом строки (в случае, если модификатор
        <em class="emphasis">D</em> не установлен). В Perl ситуация
        полностью аналогична.
       </span>
       <span class="simpara">
        Если этот модификатор используется, метасимволы
        &quot;начало строки&quot; и &quot;конец строки&quot; также соответствуют
        позициям перед произвольным символом перевода и строки и,
        соответственно, после, как и в самом начале и в самом конце
        строки. Это соответствует Perl-модификатору /m.
        В случае, если обрабатываемый текст не содержит символов
        перевода строки, либо шаблон не содержит метасимволов &#039;^&#039;
        или &#039;$&#039;, данный модификатор не имеет никакого эффекта.
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">s</em> (<i>PCRE_DOTALL</i>)</span>
      <dd>

       <span class="simpara">
        Если данный модификатор используется, метасимвол &quot;точка&quot;
        в шаблоне соответствует всем символам, включая перевод
        строк. Без него - всем, за исключением переводов строк.
        Этот модификатор эквивалентен записи /s в Perl.
        Класс символов, построенный на отрицании, например [^a],
        всегда соответствует переводу строки, независимо от
        наличия этого модификатора.
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">x</em> (<i>PCRE_EXTENDED</i>)</span>
      <dd>

       <span class="simpara">
        Если используется данный модификатор, неэкранированные
        пробелы, символы табуляции и пустой строки будут
        проигнорированы в шаблоне, если они не являются частью
        символьного класса. Также игнорируются все символы между
        неэкранированным символом &#039;#&#039; (если он не является частью
        символьного класса) и символом перевода строки (включая
        сами символы &#039;\n&#039; и &#039;#&#039;). Это эквивалентно Perl-модификатору
        /x, и позволяет размещать комментарии в сложных шаблонах.
        Замечание: это касается только символьных данных. Пробельные
        символы не фигурируют в служебных символьных последовательностях,
        к примеру, в последовательности &#039;(?(&#039;, открывающей условную
        подмаску.
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">e</em> (<i>PREG_REPLACE_EVAL</i>)</span>
      <dd>

       <span class="simpara">
        Если используется данный модификатор, <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span>
        после выполнения стандартных подстановок в заменяемой строке
        интерпретирует ее как PHP-код и использует результат для
        замены искомой строки.
        Одинарные и двойные кавычки, обратные слэши (<i>\</i>)
        NULL-символы будут проэкранированы обратными слэшами в
        подставляемых обратных ссылках.
       </span>
       <div class="caution"><b class="caution">Предостережение</b>
        <p class="para">
         Прежде чем подставить значение обратной ссылки, к этому значению
         применяется функция addslashes. Таким образом, если обратная ссылка
         используется как строка в кавычках, то экранированные символы
         будут преобразованы в строковые константы. Однако проэкранированные
         символы, которые обычно не должны изменяться, сохраняют примененные
         к ним слэши. Это делает использование данного модификатора довольно
         проблематичным.
        </p>
       </div>
       <div class="caution"><b class="caution">Предостережение</b>
        <p class="para">
         Убедитесь, что параметр <i><tt class="parameter">replacement</tt></i>
         содержит строку с корректным PHP-кодом, иначе PHP сообщит
         об ошибке парсинга на строке, содержащей вызов
         <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span>.
        </p>
       </div>
       <blockquote class="note"><p><b class="note">Замечание</b>: 
        <p class="para">
         Этот модификатор используется только в функции
         <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span>, в других PCRE функциях
         он игнорируется.
        </p>
       </p></blockquote>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">A</em> (<i>PCRE_ANCHORED</i>)</span>
      <dd>

       <span class="simpara">
        Если используется данный модификатор, соответствие шаблону
        будет достигаться только в том случае, если он &quot;заякорен&quot;, т.е.
        соответствует началу строки, в которой производится поиск.
        Того же эффекта можно достичь подходящей конструкцией с вложенным
        шаблоном, которая является единственным способом реализации
        этого поведения в Perl.
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">D</em> (<i>PCRE_DOLLAR_ENDONLY</i>)</span>
      <dd>

       <span class="simpara">
        Если используется данный модификатор, метасимвол $ в шаблоне
        соответствует только окончанию обрабатываемых данных. Без
        этого модификатора метасимвол $ соответствует также позиции
        перед последним символом, в случае, если им является перевод
        строки (но не распространяется на любые другие переводы строк).
        Данный модификатор игнорируется, если используется модификатор
        <em class="emphasis">m</em>. В языке Perl аналогичный модификатор
        отсутствует.
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">S</em></span>
      <dd>

       <span class="simpara">
        В случае, если планируется многократно использовать шаблон,
        имеет смысл потратить немного больше времени на его анализ,
        чтобы уменьшить время его выполнения.
        В случае, если данный модификатор используется, проводится
        дополнительный анализ шаблона. В настоящем это имеет смысл
        только для &quot;незаякоренных&quot; шаблонов, не начинающихся с
        какого-либо определенного символа.
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">U</em> (<i>PCRE_UNGREEDY</i>)</span>
      <dd>

       <span class="simpara">
        Этот модификатор инвертирует жадность квантификаторов, таким
        образом они по умолчанию не жадные. Но становятся жадными,
        если за ними следует символ <i>?</i>. Такая
        возможность не совместима с Perl. Его также можно установить
        с помощью (<i>?U</i>)
        <a href="regexp.reference.internal-options.html" class="link">установки
        модификатора внутри шаблона</a> или добавив знак вопроса
        после квантификатора (например, <i>.*?</i>).
       </span>
       <blockquote class="note"><p><b class="note">Замечание</b>: 
        <p class="para">
         В нежадном режиме обычно невозможно совпадение символов
         превышающих <a href="pcre.configuration.html#ini.pcre.backtrack-limit" class="link">pcre.backtrack_limit</a>.
        </p>
       </p></blockquote>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">X</em> (<i>PCRE_EXTRA</i>)</span>
      <dd>

       <span class="simpara">
        Этот модификатор включает дополнительную функциональность
        PCRE, которая не совместима с Perl: любой обратный слэш в
        шаблоне, за которым следует символ, не имеющий специального
        значения, приводят к ошибке.
        Это обусловлено тем, что подобные комбинации зарезервированы для
        дальнейшего развития. По умолчанию же, как и в Perl, слэш
        со следующим за ним символом без специального значения трактуется как опечатка.
        На сегодняшний день это все возможности, которые управляются данным модификатором
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">J</em> (<i>PCRE_INFO_JCHANGED</i>)</span>
      <dd>

       <span class="simpara">
        Модификатор (?J) меняет значение локальной опции
        <i>PCRE_DUPNAMES</i> - подшаблоны могут
        иметь одинковые имена.
       </span>
      </dd>

     </dt>

     <dt>

      <span class="term"><em class="emphasis">u</em> (<i>PCRE8</i>)</span>
      <dd>

       <span class="simpara">
        Этот модификатор включает дополнительную функциональность PCRE,
        которая не совместима с Perl: шаблоны обрабатываются как UTF-8 строки.
        Модификатор u доступен в PHP 4.1.0 и выше для Unix-платформ,
        и в PHP 4.2.3 и выше для Windows платформ.
        Валидность UTF-8 в шаблоне проверяется начиная с PHP 4.3.5.
       </span>
      </dd>

     </dt>

    </dl>

   </blockquote>
  </p>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="regexp.reference.performance.html">Производительность</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="reference.pcre.pattern.differences.html">Differences From Perl</a></div>
 <div class="up"><a href="pcre.pattern.html">Регулярные выражения PCRE</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
