<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Добавляет нового сына в конец списка сыновей</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.domnode-add-namespace.html">DomNode-&gt;add_namespace</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.domnode-append-sibling.html">DomNode-&gt;append_sibling</a></div>
 <div class="up"><a href="ref.domxml.html">DOM XML (PHP 4) Функции</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.domnode-append-child" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DomNode->append_child</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.1.0)</p><p class="refpurpose"><span class="refname">DomNode-&gt;append_child</span> &mdash; <span class="dc-title">
   Добавляет нового сына в конец списка сыновей
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.domnode-append-child-description">
  <h3 class="title">Описание</h3>
  <div class="classsynopsis">
   <div class="ooclass"></div>
   <div class="methodsynopsis dc-description">
    <span class="type">DOMNode</span> <span class="methodname"><b>DOMNode::append_child</b></span>
     ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$newnode</tt></span>
    )</div>

  </div>
  <p class="para">
   Эта функция добавляет сына к существующему списку сыновей, либо создает
   список.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.domnode-append-child-parameters">
  <h3 class="title">Список параметров</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">newnode</tt></i></span>
     <dd>

      <p class="para">
       Добавляемый узел. Может быть создан посредством например 
       <a href="function.domdocument-create-element.html" class="xref">DomDocument-&gt;create_element</a>,
       <a href="function.domdocument-create-text-node.html" class="xref">DomDocument-&gt;create_text_node</a> и т.п. или 
       просто используя другой узел.
      </p>
      <blockquote class="note"><p><b class="note">Замечание</b>: 
       <p class="para">
        Невозможно этом методом добавить узел 
        <b class="classname">DOMAttribute</b>. Используйте вместо него 
        функцию <a href="function.domelement-set-attribute.html" class="xref">DomElement-&gt;set_attribute</a>.
       </p>
      </p></blockquote>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.domnode-append-child-returnvalues">
  <h3 class="title">Возвращаемые значения</h3>
  <p class="para">
   Возвращает добавленный узел или <b><tt>FALSE</tt></b> в случае возникновения ошибки.
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.domnode-append-child-changelog">
  <h3 class="title">Список изменений</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Версия</th>
       <th>Описание</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.3.0</td>
       <td align="left">
        Вставка узла из другого документа больше не поддерживается.
       </td>
      </tr>

      <tr valign="middle">
       <td align="left">4.3.0</td>
       <td align="left">
        В отличие от версий PHP раньше 4.3.0 новый сын дублируется до добавления.
        Таким образом новый сын является полной копией, которую можно
        модифицировать, не изменяя состояния узла, переданного в функцию в 
        качестве аргумента. Если переданный узел имел сыновей, то они также
        будут дублированы, что сильно упрощает дублирование больших частей 
        XML документа. Возвращаемым значением является добавленный сын. Если
        планируется дальнейшая модификация добавленного сына, необходимо 
        использовать именно возвращенный узел.
       </td>
      </tr>

      <tr valign="middle">
       <td align="left">4.3.0 и 4.3.1</td>
       <td align="left">
        Если новый сын <i><tt class="parameter">newnode</tt></i> уже является сыном 
        DomNode, то он не включается в существующий контекст. Поэтому 
        <i><tt class="parameter">newnode</tt></i> перемещается и ничего не копирует.
        Это поведение соответствует спецификациям W3C. Если требуется 
        старое поведение, используйте функцию <a href="function.domnode-clone-node.html" class="xref">DomNode-&gt;clone_node</a> перед добавлением узла.
       </td>
      </tr>

      <tr valign="middle">
       <td align="left">4.3.2</td>
       <td align="left">
        Если новый сын <i><tt class="parameter">newnode</tt></i> уже находится в дереве, 
        он отсоединяется от своего контекста. Применяются те же правила.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>
 
 <div class="refsect1 examples" id="refsect1-function.domnode-append-child-examples">
  <h3 class="title">Примеры</h3>
  <p class="para">
   Следующий пример добавляет новый элемент в чистый документ и устанавливает 
   атрибут <i>align</i> в значение <i>left</i>.
  </p>
  <p class="para">
   <div class="example" id="example-4920">
    <p><b>Пример #1 Добавление сына</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$doc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">domxml_new_doc</span><span style="color: #007700">(</span><span style="color: #DD0000">"1.0"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$node&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">create_element</span><span style="color: #007700">(</span><span style="color: #DD0000">"para"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$newnode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">append_child</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$newnode</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_attribute</span><span style="color: #007700">(</span><span style="color: #DD0000">"align"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"left"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   Пример выше можно записать в следующем виде:
  </p>
  <p class="para">
   <div class="example" id="example-4921">
    <p><b>Пример #2 Добавление сына</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$doc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">domxml_new_doc</span><span style="color: #007700">(</span><span style="color: #DD0000">"1.0"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$node&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">create_element</span><span style="color: #007700">(</span><span style="color: #DD0000">"para"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_attribute</span><span style="color: #007700">(</span><span style="color: #DD0000">"align"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"left"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$newnode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">append_child</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   Ниже представлен более исчерпывающий пример. Вначале производится поиск
   определенного элемента, затем он дублируется вместе со всеми потомками и
   добавляется как брат. В итоге новый атрибут добавлен к одному из сыновей 
   нового брата, и документ скопирован целиком.
  </p>
  <p class="para">
   <div class="example" id="example-4922">
    <p><b>Пример #3 Добавление сына</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">include(</span><span style="color: #DD0000">"example.inc"</span><span style="color: #007700">);<br /><br />if&nbsp;(!</span><span style="color: #0000BB">$dom&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">domxml_open_mem</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlstr</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Ошибка&nbsp;при&nbsp;разборе&nbsp;документа\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #0000BB">$elements&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_elements_by_tagname</span><span style="color: #007700">(</span><span style="color: #DD0000">"informaltable"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$elements</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$element&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$elements</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">$parent&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parent_node</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$newnode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$parent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">append_child</span><span style="color: #007700">(</span><span style="color: #0000BB">$element</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$children&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$newnode</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$attr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$children</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">set_attribute</span><span style="color: #007700">(</span><span style="color: #DD0000">"align"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"left"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$xmlfile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dump_mem</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlfile</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   Пример выше также можно выполнить с помощью
   <a href="function.domnode-insert-before.html" class="xref">DomNode-&gt;insert_before</a> вместо
   <a href="function.domnode-append-child.html" class="xref">DomNode-&gt;append_child</a>.
  </p>
 </div>

 <div class="refsect1 migration" id="refsect1-function.domnode-append-child-migration">
  <h3 class="title">Переход на PHP 5</h3>
  <p class="para">
   Необходимо использовать <a href="domnode.appendchild.html" class="xref">DOMNode::appendChild</a>.
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.domnode-append-child-seealso">
  <h3 class="title">Смотрите также</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="function.domnode-insert-before.html" class="xref">DomNode-&gt;insert_before</a></li>
    <li class="member"><a href="function.domnode-clone-node.html" class="xref">DomNode-&gt;clone_node</a></li>
   </ul>
  </p>
 </div>

</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.domnode-add-namespace.html">DomNode-&gt;add_namespace</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.domnode-append-sibling.html">DomNode-&gt;append_sibling</a></div>
 <div class="up"><a href="ref.domxml.html">DOM XML (PHP 4) Функции</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
